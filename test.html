<!DOCTYPE html>
<html lang="en">
<html>
<!-- Testing Leaflet to display NCC parcels in the Carden Alvar -->
<!-- Try seeing if we can use the code where you can click between basemaps as a click between layers method instead and how quick it will load doing that --> 
  
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <link rel="stylesheet" href="stylesheet.css">
    <title>JML Cartolytics</title>

    <!-- Load Leaflet from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" crossorigin=""></script>

    <!-- Load Esri Leaflet from CDN -->
    <script src="https://unpkg.com/esri-leaflet@3.0.10/dist/esri-leaflet.js"></script>
    <script src="https://unpkg.com/esri-leaflet-vector@4.0.1/dist/esri-leaflet-vector.js"></script>

    <style>
      body {
        margin: 0;
        padding: 0;
      }
      #map {
        position: absolute;
        top: 68px;
        bottom: 0;
        right: 0;
        left: 0;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 14px;
        color: #323232;
      }
       #info-pane {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 400;
        padding: 1em;
        background: white;
      }
    </style>
  </head>
<!-- Changed to focus on the Carden area with a zoom of 12 to ensure enough of the area is visible including some relevant anthropogenic features for orientation.
Added NCC protected areas layer that was created by querying a protected area GDB for NCC owned areas and uploaded this feature layer to AGOL. Next changed the 
background basemap to imagery since we will be using remote sensing tech and NCC, in general, displays their maps with a imagery background to help with restoration 
initiatives. -->
  <body>
<!--    
<div class="navbar">
  <a class="active" href="index.html">Home</a>
  <a href="about.html">About</a>
  <a href="trials.html">Trials</a>
  <a href="map.html">Solution</a>
</div>
--> 
    <div id="map"></div>
    <div id="info-pane" class="leaflet-bar">Hover to Inspect</div>
    <script>

      const map = L.map("map", {
        minZoom: 2
      })

      map.setView([44.6308, -79.0548], 12); 

      const apiKey = "AAPKef6c3ee5104e425d91ef8ee2596379ecuNIO6muQJMeheJcqAq6wMV-hjNs94Br8HhqXM19D8IAWQEZ0SdW28lOX99Oblec_";

      const basemapEnum = "ArcGIS:LightGray:Base";

      L.esri.Vector.vectorBasemapLayer(basemapEnum, {
        apiKey: apiKey
      }).addTo(map);
      
      const boundaries = L.esri
        .featureLayer({
          url: "https://services1.arcgis.com/pMeXRvgWClLJZr3s/arcgis/rest/services/ProtectedArea_Boundary/FeatureServer/0/",
          simplifyFactor: 0.35,
          precision: 5,
          fields: ["NAME_E"],
          style: {
            color: "#A9A9A9",
            weight: 1
          }
        })
        .addTo(map);
      let oldId;

      boundaries.on("mouseout", function (e) {
        document.getElementById("info-pane").innerHTML = "Hover to Inspect";
        boundaries.resetFeatureStyle(oldId);
      });

      boundaries.on("mouseover", function (e) {
        oldId = e.layer.feature.id;
        document.getElementById("info-pane").innerHTML = e.layer.feature.properties.NAME_E;
        boundaries.setFeatureStyle(e.layer.feature.id, {
          color: "#296b2f",
          weight: 2,
          opacity: 1
        });
      });
      
     // var Carden = L.esri
       //.featureLayer({
        // url: "https://services1.arcgis.com/pMeXRvgWClLJZr3s/arcgis/rest/services/CardenShapefile/FeatureServer/0/"
       // });

      //Carden.addTo(map); Need to figure out way to display this different from the NCC layers or cant display at all 
    </script>

  </body>

</html>
